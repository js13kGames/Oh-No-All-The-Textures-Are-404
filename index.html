<!DOCTYPE html>
<meta charset="utf8" />
<meta name="viewport" content="width=device-width, user-scalable=0" />
<title>Krates</title>
<style>
    html,
    body {
        overflow: hidden;
        margin: 0;
        background-color: #222;
    }
    main {
        position: absolute;
        width: 100vw;
        height: 100vh;
        user-select: none;
    }
    #ds {
        width: 512px;
        margin: 0 auto;
        padding: 20px;
        display: flex;
        flex-flow: column nowrap;
        justify-content: space-between;
    }
    canvas {
        width: 512px;
        height: 384px;
    }
    div#hinge {
        height: 20px;
    }
    img {
        display: none;
    }
    #debug {
        display: flex;
        flex-flow: column nowrap;
        align-items: flex-end;
        position: absolute;
        top: 0;
        right: 0;
        color: #fff;
        font-family: monospace;
    }
    #debug button {
        cursor: pointer;
        padding: 0;
        background: none;
        border: none;
        font: inherit;
        color: inherit;
    }
    #debug div {
        width: max-content;
        background: #000;
        color: #fff;
    }
</style>
<body>
    <img src="../textures/krates.gif" id="krates" />
    <img
        src="data:image/gif;base64,R0lGODdhCAAIAKIAAAAAAABmAACZMwDMM////wAAAAAAAAAAACH5BAkAAAUALAAAAAAIAAgAAAMSKCEjHs0puaa8tkVcW6jPtUQJADs="
        id="grass"
    />
    <img
        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkY0NzkxMUVEOUI1MTFFQUFDQjNENkU5MDlENDlEMEYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkY0NzkxMUZEOUI1MTFFQUFDQjNENkU5MDlENDlEMEYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OUI5MjJDM0Q5QjUxMUVBQUNCM0Q2RTkwOUQ0OUQwRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OUI5MjJDNEQ5QjUxMUVBQUNCM0Q2RTkwOUQ0OUQwRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlCcJZ4AAAA7SURBVHjaYmRgYOBggABGBlTwH0SwQDmbGLADPxYkna5okrtBckwMBADlClhgroXaiQ7+MxLyJkCAAQAV1Abg0FTRWwAAAABJRU5ErkJggg=="
        id="shadow"
    />
    <img
        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHlBMVEUWSuUW5UoW5eVAQEB+FuV+5RaWlpblFhblFrHlsRZkv2sIAAABfElEQVR42u3dPWrDQBAG0AWfQOQGKlInpEl64RsoBzD5uUF0ADfuU+m2KYzQavrMbvFU6pPWDwYGdljb5SVcX+H677wAAAAAAHQDuIYHzmGBU8gfQ/4Q8veQ/4b8B+AIeL3dbvUDH9M01Qs8lVLq/DKOY50/D8NQ55/zPNf527qudf69LIsS9AbQiAAAAAAAmgGyPzDmAAAAAAD9ALJ2QjEHKNnzgJgrQT8AjQgAAAAAoBnAhAQAAAAAIHsnFN8HKNnzgPi+EvQD0IgAAAAAAJwfAAAAAABoDsjaCcX1AUr2PCCurwT9ADQiAAAAAADnBwAAAAAAmgOydkJxJwZQsucBcR6hBP0ANCIAAAAAAOcHAAAAAACaA7J2Qlt+AjgC8uYB97v79xmUoB+ARgQAAAAA4PwAAAAAAEBzQNZOaMvPAEdA3jzgfnf/PUQl6AegEQEAAAAAOD8AAAAAANAckLUT2vIrwBGQNw+4393/T1EJ+gFoRAAAAAAArQB/ZsZJK/J4qtUAAAAASUVORK5CYII="
        id="checker1"
    />
    <div id="ds">
        <canvas id="scene"></canvas>
        <div id="hinge"></div>
        <canvas id="minimap"></canvas>
    </div>
    <main></main>

    <div id="debug">
        <div>update: <span id="update"></span></div>
        <div>delta: <span id="delta"></span></div>
        <div>fps: <span id="fps"></span></div>
        <div><button onclick="toggle(this)">pause</button></div>
    </div>
    <script type="module">
        import {loop_start, loop_stop} from "./src/core.js";
        import "./src/index.js";

        let running = true;
        window.toggle = function toggle(button) {
            if (running) {
                running = false;
                loop_stop();
                button.textContent = "resume";
            } else {
                running = true;
                loop_start(game);
                button.textContent = "pause";
            }
        };
    </script>
</body>
